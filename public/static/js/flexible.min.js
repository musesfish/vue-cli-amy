//author:caibaojian
//website:http://caibaojian.com
//weibo:http:weibo.com/kujian
! function (e, t) {
  function n() {
    var n = l.getBoundingClientRect().width; //获取网页文档的宽度
    t || (t = 540), // t如果为undefined 则赋值540
      n > t && (n = t); // 
    var o = 100 * n / e; // 
    if (d = "html{font-size:" + o + "px !important}",
      i = document.getElementById("rootsize") || document.createElement("style"),
      document.getElementById("rootsize") || (document.getElementsByTagName("head")[0].appendChild(i),
        i.id = "rootsize"),
      i.styleSheet)
      i.styleSheet.disabled || (i.styleSheet.cssText = d);
    else
      try { i.innerHTML = d }
      catch (s) { i.innerText = d } l.style.fontSize = o + "px"
  }
  var o,
    i,
    d,
    s = document,
    a = window,
    l = s.documentElement;
  n(),

    a.addEventListener("resize", function () {
      clearTimeout(o),
        o = setTimeout(n, 300)
    }, !1),

    a.addEventListener("pageshow", function (e) {
      e.persisted && (clearTimeout(o), o = setTimeout(n, 300))
    }, !1),

    "complete" === s.readyState ? s.body.style.fontSize = "16px" : s.addEventListener("DOMContentLoaded",
      function (e) { s.body.style.fontSize = "16px" }, !1)
}(750, 750);
// 设计稿宽度， 网页文档宽度

// 兼容wx调节字体
(function() {
  if (typeof WeixinJSBridge == "object" && typeof window.WeixinJSBridge.invoke == "function") {
     handleFontSize();
   } else {
     document.addEventListener("WeixinJSBridgeReady", handleFontSize, false);
   }
   function handleFontSize() {
     // 设置网页字体为默认大小
     window.WeixinJSBridge.invoke('setFontSizeCallback', { 'fontSize' : 0 });
     // 重写设置网页字体大小的事件
     window.WeixinJSBridge.on('menu:setfont', function() {
       window.WeixinJSBridge.invoke('setFontSizeCallback', { 'fontSize' : 0 });
     });
   }
})();